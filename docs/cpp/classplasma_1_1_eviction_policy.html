<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Apache Arrow (C++): plasma::EvictionPolicy Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Apache Arrow (C++)
   </div>
   <div id="projectbrief">A columnar in-memory analytics layer designed to accelerate big data.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceplasma.html">plasma</a></li><li class="navelem"><a class="el" href="classplasma_1_1_eviction_policy.html">EvictionPolicy</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classplasma_1_1_eviction_policy-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">plasma::EvictionPolicy Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The eviction policy.  
 <a href="classplasma_1_1_eviction_policy.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="eviction__policy_8h_source.html">plasma/eviction_policy.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad91eb595e8f9c20b80ba27b6d3c8b720"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplasma_1_1_eviction_policy.html#ad91eb595e8f9c20b80ba27b6d3c8b720">EvictionPolicy</a> (<a class="el" href="structplasma_1_1_plasma_store_info.html">PlasmaStoreInfo</a> *store_info)</td></tr>
<tr class="memdesc:ad91eb595e8f9c20b80ba27b6d3c8b720"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct an eviction policy.  <a href="#ad91eb595e8f9c20b80ba27b6d3c8b720">More...</a><br /></td></tr>
<tr class="separator:ad91eb595e8f9c20b80ba27b6d3c8b720"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a842fbb2a2632c499d142aa021a045a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplasma_1_1_eviction_policy.html#a2a842fbb2a2632c499d142aa021a045a">object_created</a> (const <a class="el" href="namespaceplasma.html#adf1aa2f87f6f11e1993628f574e31e75">ObjectID</a> &amp;object_id)</td></tr>
<tr class="memdesc:a2a842fbb2a2632c499d142aa021a045a"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method will be called whenever an object is first created in order to add it to the LRU cache.  <a href="#a2a842fbb2a2632c499d142aa021a045a">More...</a><br /></td></tr>
<tr class="separator:a2a842fbb2a2632c499d142aa021a045a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83db4a62954f0f68483584dabba30b4d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplasma_1_1_eviction_policy.html#a83db4a62954f0f68483584dabba30b4d">require_space</a> (int64_t size, std::vector&lt; <a class="el" href="namespaceplasma.html#adf1aa2f87f6f11e1993628f574e31e75">ObjectID</a> &gt; *objects_to_evict)</td></tr>
<tr class="memdesc:a83db4a62954f0f68483584dabba30b4d"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method will be called when the Plasma store needs more space, perhaps to create a new object.  <a href="#a83db4a62954f0f68483584dabba30b4d">More...</a><br /></td></tr>
<tr class="separator:a83db4a62954f0f68483584dabba30b4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad37a1b1c2774a18f3c7ca331e5c856bb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplasma_1_1_eviction_policy.html#ad37a1b1c2774a18f3c7ca331e5c856bb">begin_object_access</a> (const <a class="el" href="namespaceplasma.html#adf1aa2f87f6f11e1993628f574e31e75">ObjectID</a> &amp;object_id, std::vector&lt; <a class="el" href="namespaceplasma.html#adf1aa2f87f6f11e1993628f574e31e75">ObjectID</a> &gt; *objects_to_evict)</td></tr>
<tr class="memdesc:ad37a1b1c2774a18f3c7ca331e5c856bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method will be called whenever an unused object in the Plasma store starts to be used.  <a href="#ad37a1b1c2774a18f3c7ca331e5c856bb">More...</a><br /></td></tr>
<tr class="separator:ad37a1b1c2774a18f3c7ca331e5c856bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac25986dd3602eb86aad783d58d19f39e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplasma_1_1_eviction_policy.html#ac25986dd3602eb86aad783d58d19f39e">end_object_access</a> (const <a class="el" href="namespaceplasma.html#adf1aa2f87f6f11e1993628f574e31e75">ObjectID</a> &amp;object_id, std::vector&lt; <a class="el" href="namespaceplasma.html#adf1aa2f87f6f11e1993628f574e31e75">ObjectID</a> &gt; *objects_to_evict)</td></tr>
<tr class="memdesc:ac25986dd3602eb86aad783d58d19f39e"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method will be called whenever an object in the Plasma store that was being used is no longer being used.  <a href="#ac25986dd3602eb86aad783d58d19f39e">More...</a><br /></td></tr>
<tr class="separator:ac25986dd3602eb86aad783d58d19f39e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35bea3be37a7ab468af4e243d93f4a19"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplasma_1_1_eviction_policy.html#a35bea3be37a7ab468af4e243d93f4a19">choose_objects_to_evict</a> (int64_t num_bytes_required, std::vector&lt; <a class="el" href="namespaceplasma.html#adf1aa2f87f6f11e1993628f574e31e75">ObjectID</a> &gt; *objects_to_evict)</td></tr>
<tr class="memdesc:a35bea3be37a7ab468af4e243d93f4a19"><td class="mdescLeft">&#160;</td><td class="mdescRight">Choose some objects to evict from the Plasma store.  <a href="#a35bea3be37a7ab468af4e243d93f4a19">More...</a><br /></td></tr>
<tr class="separator:a35bea3be37a7ab468af4e243d93f4a19"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The eviction policy. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ad91eb595e8f9c20b80ba27b6d3c8b720"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad91eb595e8f9c20b80ba27b6d3c8b720">&#9670;&nbsp;</a></span>EvictionPolicy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">plasma::EvictionPolicy::EvictionPolicy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structplasma_1_1_plasma_store_info.html">PlasmaStoreInfo</a> *&#160;</td>
          <td class="paramname"><em>store_info</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Construct an eviction policy. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">store_info</td><td>Information about the Plasma store that is exposed to the eviction policy. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ad37a1b1c2774a18f3c7ca331e5c856bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad37a1b1c2774a18f3c7ca331e5c856bb">&#9670;&nbsp;</a></span>begin_object_access()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void plasma::EvictionPolicy::begin_object_access </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespaceplasma.html#adf1aa2f87f6f11e1993628f574e31e75">ObjectID</a> &amp;&#160;</td>
          <td class="paramname"><em>object_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="namespaceplasma.html#adf1aa2f87f6f11e1993628f574e31e75">ObjectID</a> &gt; *&#160;</td>
          <td class="paramname"><em>objects_to_evict</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This method will be called whenever an unused object in the Plasma store starts to be used. </p>
<p>When this method is called, the eviction policy will assume that the objects chosen to be evicted will in fact be evicted from the Plasma store by the caller.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">object_id</td><td>The ID of the object that is now being used. </td></tr>
    <tr><td class="paramname">objects_to_evict</td><td>The object IDs that were chosen for eviction will be stored into this vector. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a35bea3be37a7ab468af4e243d93f4a19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35bea3be37a7ab468af4e243d93f4a19">&#9670;&nbsp;</a></span>choose_objects_to_evict()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t plasma::EvictionPolicy::choose_objects_to_evict </td>
          <td>(</td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>num_bytes_required</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="namespaceplasma.html#adf1aa2f87f6f11e1993628f574e31e75">ObjectID</a> &gt; *&#160;</td>
          <td class="paramname"><em>objects_to_evict</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Choose some objects to evict from the Plasma store. </p>
<p>When this method is called, the eviction policy will assume that the objects chosen to be evicted will in fact be evicted from the Plasma store by the caller.</p>
<dl class="section note"><dt>Note</dt><dd>This method is not part of the API. It is exposed in the header file only for testing.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">num_bytes_required</td><td>The number of bytes of space to try to free up. </td></tr>
    <tr><td class="paramname">objects_to_evict</td><td>The object IDs that were chosen for eviction will be stored into this vector. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The total number of bytes of space chosen to be evicted. </dd></dl>

</div>
</div>
<a id="ac25986dd3602eb86aad783d58d19f39e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac25986dd3602eb86aad783d58d19f39e">&#9670;&nbsp;</a></span>end_object_access()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void plasma::EvictionPolicy::end_object_access </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespaceplasma.html#adf1aa2f87f6f11e1993628f574e31e75">ObjectID</a> &amp;&#160;</td>
          <td class="paramname"><em>object_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="namespaceplasma.html#adf1aa2f87f6f11e1993628f574e31e75">ObjectID</a> &gt; *&#160;</td>
          <td class="paramname"><em>objects_to_evict</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This method will be called whenever an object in the Plasma store that was being used is no longer being used. </p>
<p>When this method is called, the eviction policy will assume that the objects chosen to be evicted will in fact be evicted from the Plasma store by the caller.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">object_id</td><td>The ID of the object that is no longer being used. </td></tr>
    <tr><td class="paramname">objects_to_evict</td><td>The object IDs that were chosen for eviction will be stored into this vector. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2a842fbb2a2632c499d142aa021a045a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a842fbb2a2632c499d142aa021a045a">&#9670;&nbsp;</a></span>object_created()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void plasma::EvictionPolicy::object_created </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespaceplasma.html#adf1aa2f87f6f11e1993628f574e31e75">ObjectID</a> &amp;&#160;</td>
          <td class="paramname"><em>object_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This method will be called whenever an object is first created in order to add it to the LRU cache. </p>
<p>This is done so that the first time, the Plasma store calls begin_object_access, we can remove the object from the LRU cache.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">object_id</td><td>The object ID of the object that was created. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a83db4a62954f0f68483584dabba30b4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83db4a62954f0f68483584dabba30b4d">&#9670;&nbsp;</a></span>require_space()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool plasma::EvictionPolicy::require_space </td>
          <td>(</td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="namespaceplasma.html#adf1aa2f87f6f11e1993628f574e31e75">ObjectID</a> &gt; *&#160;</td>
          <td class="paramname"><em>objects_to_evict</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This method will be called when the Plasma store needs more space, perhaps to create a new object. </p>
<p>If the required amount of space cannot be freed up, then a fatal error will be thrown. When this method is called, the eviction policy will assume that the objects chosen to be evicted will in fact be evicted from the Plasma store by the caller.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>The size in bytes of the new object, including both data and metadata. </td></tr>
    <tr><td class="paramname">objects_to_evict</td><td>The object IDs that were chosen for eviction will be stored into this vector. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if enough space can be freed and false otherwise. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/apache-arrow/arrow/cpp/src/plasma/<a class="el" href="eviction__policy_8h_source.html">eviction_policy.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
