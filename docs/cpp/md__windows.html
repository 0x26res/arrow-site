<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Apache Arrow (C++): Windows</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Apache Arrow (C++)
   </div>
   <div id="projectbrief">A columnar in-memory analytics layer designed to accelerate big data.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Windows </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1>Developing Arrow C++ on Windows</h1>
<h2>System setup, conda, and conda-forge</h2>
<p>Since some of the Arrow developers work in the Python ecosystem, we are investing time in maintaining the thirdparty build dependencies for Arrow and related C++ libraries using the conda package manager. Others are free to add other development instructions for Windows here.</p>
<h3>conda and package toolchain</h3>
<p><a href="https://conda.io/miniconda.html">Miniconda</a> is a minimal Python distribution including the conda package manager. To get started, download and install a 64-bit distribution.</p>
<p>We recommend using packages from <a href="https://conda-forge.github.io/">conda-forge</a>. Launch cmd.exe and run following commands:</p>
<div class="fragment"><div class="line">conda config --add channels conda-forge</div></div><!-- fragment --><p>Now, you can bootstrap a build environment</p>
<div class="fragment"><div class="line">conda create -n arrow-dev cmake git boost-cpp flatbuffers rapidjson cmake thrift-cpp snappy zlib brotli gflags lz4-c zstd -c conda-forge</div></div><!-- fragment --><p><em><b>Note:</b></em> </p><blockquote class="doxtable">
<p><em>Make sure to get the <code>conda-forge</code> build of <code>gflags</code> as the </em></p>
</blockquote>
<p>naming of the library differs from that in the <code>defaults</code> channel</p>
<p><em>Activate just created conda environment with pre-installed packages from previous step:</em></p>
<p><em></p><div class="fragment"><div class="line">activate arrow-dev</div></div><!-- fragment --><p></em></p>
<p><em>We are using the <a href="https://cmake.org/">cmake</a> tool to support Windows builds. To allow cmake to pick up 3rd party dependencies, you should set <code>ARROW_BUILD_TOOLCHAIN</code> environment variable to contain <code>Library</code> folder path of new created on previous step <code>arrow-dev</code> conda environment.</em></p>
<p><em>To set <code>ARROW_BUILD_TOOLCHAIN</code> environment variable visible only for current terminal session you can run following. <code>CONDA_PREFIX</code> is set by conda to the current environment root by the <code>activate</code> script. </p><div class="fragment"><div class="line">set ARROW_BUILD_TOOLCHAIN=%CONDA_PREFIX%\Library</div></div><!-- fragment --><p></em></p>
<p><em>To validate value of <code>ARROW_BUILD_TOOLCHAIN</code> environment variable you can run following terminal command: </p><div class="fragment"><div class="line">echo %ARROW_BUILD_TOOLCHAIN%</div></div><!-- fragment --><p></em></p>
<p><em>As alternative to <code>ARROW_BUILD_TOOLCHAIN</code>, it's possible to configure path to each 3rd party dependency separately by setting appropriate environment variable:</em></p>
<p><em><code>FLATBUFFERS_HOME</code> variable with path to <code>flatbuffers</code> installation <code>RAPIDJSON_HOME</code> variable with path to <code>rapidjson</code> installation <code>GFLAGS_HOME</code> variable with path to <code>gflags</code> installation <code>SNAPPY_HOME</code> variable with path to <code>snappy</code> installation <code>ZLIB_HOME</code> variable with path to <code>zlib</code> installation <code>BROTLI_HOME</code> variable with path to <code>brotli</code> installation <code>LZ4_HOME</code> variable with path to <code>lz4</code> installation <code>ZSTD_HOME</code> variable with path to <code>zstd</code> installation</em></p>
<p><em></p><h3>Customize static libraries names lookup of 3rd party dependencies</h3>
<p></em></p>
<p><em></em></p>
<p><em>If you decided to use pre-built 3rd party dependencies libs, it's possible to configure Arrow's cmake build script to search for customized names of 3rd party static libs.</em></p>
<p><em><code>zlib</code>. Pass <code>-DARROW_ZLIB_VENDORED=OFF</code> to enable lookup of custom zlib build. Set <code>ZLIB_HOME</code> environment variable. Pass <code>-DZLIB_MSVC_STATIC_LIB_SUFFIX=ZLIB_SUFFIX%</code> to link with zZLIB_SUFFIX%.lib</em></p>
<p><em><code>brotli</code>. Set <code>BROTLY_HOME</code> environment variable. Pass <code>-DBROTLI_MSVC_STATIC_LIB_SUFFIX=BROTLI_SUFFIX%</code> to link with brotli*BROTLI_SUFFIX%.lib.</em></p>
<p><em><code>snappy</code>. Set <code>SNAPPY_HOME</code> environment variable. Pass <code>-DSNAPPY_MSVC_STATIC_LIB_SUFFIX=SNAPPY_SUFFIX%</code> to link with snappySNAPPY_SUFFIX%.lib.</em></p>
<p><em><code>lz4</code>. Set <code>LZ4_HOME</code> environment variable. Pass <code>-LZ4_MSVC_STATIC_LIB_SUFFIX=LZ4_SUFFIX%</code> to link with lz4LZ4_SUFFIX%.lib.</em></p>
<p><em><code>zstd</code>. Set <code>ZSTD_HOME</code> environment variable. Pass <code>-ZSTD_MSVC_STATIC_LIB_SUFFIX=ZSTD_SUFFIX%</code> to link with zstdZSTD_SUFFIX%.lib.</em></p>
<p><em></p><h3>Visual Studio</h3>
<p></em></p>
<p><em></em></p>
<p><em>Microsoft provides the free Visual Studio Community edition. When doing development, you must launch the developer command prompt using</em></p>
<p><em></p><h4>Visual Studio 2015</h4>
<p></em></p>
<p><em></em></p>
<p><em></p><div class="fragment"><div class="line">{&quot;C:\Program}</div><div class="line"></div><div class="line">#### Visual Studio 2017</div><div class="line"></div><div class="line">```&quot;C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\Common7\Tools\VsDevCmd.bat&quot; -arch=amd6</div></div><!-- fragment --><p></em></p>
<p><em>It's easiest to configure a console emulator like <a href="http://cmder.net/">cmder</a> to automatically launch this when starting a new development console.</em></p>
<p><em></p><h2>Building with NMake</h2>
<p></em></p>
<p><em></em></p>
<p><em>Activate your conda build environment:</em></p>
<p><em></p><div class="fragment"><div class="line">activate arrow-dev</div></div><!-- fragment --><p></em></p>
<p><em>Change working directory in cmd.exe to the root directory of Arrow and do an out of source build using <code>nmake</code>:</em></p>
<p><em></p><div class="fragment"><div class="line">cd cpp</div><div class="line">mkdir build</div><div class="line">cd build</div><div class="line">cmake -G &quot;NMake Makefiles&quot; -DCMAKE_BUILD_TYPE=Release ..</div><div class="line">nmake</div></div><!-- fragment --><p></em></p>
<p><em>When using conda, only release builds are currently supported.</em></p>
<p><em></p><h2>Build using Visual Studio (MSVC) Solution Files</h2>
<p></em></p>
<p><em></em></p>
<p><em>Activate your conda build environment:</em></p>
<p><em></p><div class="fragment"><div class="line">activate arrow-dev</div></div><!-- fragment --><p></em></p>
<p><em>Change working directory in cmd.exe to the root directory of Arrow and do an out of source build by generating a MSVC solution:</em></p>
<p><em></p><div class="fragment"><div class="line">cd cpp</div><div class="line">mkdir build</div><div class="line">cd build</div><div class="line">cmake -G &quot;Visual Studio 14 2015 Win64&quot; -DCMAKE_BUILD_TYPE=Release ..</div><div class="line">cmake --build . --config Release</div></div><!-- fragment --><p></em></p>
<p><em></p><h2>Debug build</h2>
<p></em></p>
<p><em></em></p>
<p><em>To build Debug version of Arrow you should have pre-insalled Debug version of boost libs.</em></p>
<p><em>It's recommended to configure cmake build with following variables for Debug build:</em></p>
<p><em><code>-DARROW_BOOST_USE_SHARED=OFF</code> - enables static linking with boost debug libs and simplifies run-time loading of 3rd parties. (Recommended)</em></p>
<p><em><code>-DBOOST_ROOT</code> - sets the root directory of boost libs. (Optional)</em></p>
<p><em><code>-DBOOST_LIBRARYDIR</code> - sets the directory with boost lib files. (Optional)</em></p>
<p><em>Command line to build Arrow in Debug might look as following:</em></p>
<p><em></p><div class="fragment"><div class="line">cd cpp</div><div class="line">mkdir build</div><div class="line">cd build</div><div class="line">cmake -G &quot;Visual Studio 14 2015 Win64&quot; ^</div><div class="line">      -DARROW_BOOST_USE_SHARED=OFF ^</div><div class="line">      -DCMAKE_BUILD_TYPE=Debug ^</div><div class="line">      -DBOOST_ROOT=C:/local/boost_1_63_0  ^</div><div class="line">      -DBOOST_LIBRARYDIR=C:/local/boost_1_63_0/lib64-msvc-14.0 ^</div><div class="line">      ..</div><div class="line">cmake --build . --config Debug</div></div><!-- fragment --><p></em></p>
<p><em>To get the latest build instructions, you can reference <a href="https://github.com/apache/arrow/blob/master/ci/msvc-build.bat">msvc-build.bat</a>, which is used by automated Appveyor builds. </em></p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
