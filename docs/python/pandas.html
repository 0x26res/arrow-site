

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Pandas Interface &mdash; pyarrow  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="pyarrow  documentation" href="index.html"/>
        <link rel="next" title="File interfaces and Memory Maps" href="filesystems.html"/>
        <link rel="prev" title="Install PyArrow" href="install.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> pyarrow
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Install PyArrow</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Pandas Interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#dataframes">DataFrames</a></li>
<li class="toctree-l2"><a class="reference internal" href="#series">Series</a></li>
<li class="toctree-l2"><a class="reference internal" href="#type-differences">Type differences</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pandas-arrow-conversion">Pandas -&gt; Arrow Conversion</a></li>
<li class="toctree-l3"><a class="reference internal" href="#arrow-pandas-conversion">Arrow -&gt; Pandas Conversion</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="filesystems.html">File interfaces and Memory Maps</a></li>
<li class="toctree-l1"><a class="reference internal" href="parquet.html">Reading/Writing Parquet files</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_involved.html">Getting Involved</a></li>
</ul>
<p class="caption"><span class="caption-text">Additional Features</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="jemalloc.html">jemalloc MemoryPool</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">pyarrow</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Pandas Interface</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/pandas.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="pandas-interface">
<h1>Pandas Interface<a class="headerlink" href="#pandas-interface" title="Permalink to this headline">¶</a></h1>
<p>To interface with Pandas, PyArrow provides various conversion routines to
consume Pandas structures and convert back to them.</p>
<div class="section" id="dataframes">
<h2>DataFrames<a class="headerlink" href="#dataframes" title="Permalink to this headline">¶</a></h2>
<p>The equivalent to a Pandas DataFrame in Arrow is a <code class="xref py py-class docutils literal"><span class="pre">pyarrow.table.Table</span></code>.
Both consist of a set of named columns of equal length. While Pandas only
supports flat columns, the Table also provides nested columns, thus it can
represent more data than a DataFrame, so a full conversion is not always possible.</p>
<p>Conversion from a Table to a DataFrame is done by calling
<code class="xref py py-meth docutils literal"><span class="pre">pyarrow.table.Table.to_pandas()</span></code>. The inverse is then achieved by using
<code class="xref py py-meth docutils literal"><span class="pre">pyarrow.Table.from_pandas()</span></code>. This conversion routine provides the
convience parameter <code class="docutils literal"><span class="pre">timestamps_to_ms</span></code>. Although Arrow supports timestamps of
different resolutions, Pandas only supports nanosecond timestamps and most
other systems (e.g. Parquet) only work on millisecond timestamps. This parameter
can be used to already do the time conversion during the Pandas to Arrow
conversion.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pyarrow</span> <span class="kn">as</span> <span class="nn">pa</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]})</span>
<span class="c1"># Convert from Pandas to Arrow</span>
<span class="n">table</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Table</span><span class="o">.</span><span class="n">from_pandas</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="c1"># Convert back to Pandas</span>
<span class="n">df_new</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="series">
<h2>Series<a class="headerlink" href="#series" title="Permalink to this headline">¶</a></h2>
<p>In Arrow, the most similar structure to a Pandas Series is an Array.
It is a vector that contains data of the same type as linear memory. You can
convert a Pandas Series to an Arrow Array using <code class="xref py py-meth docutils literal"><span class="pre">pyarrow.array.from_pandas_series()</span></code>.
As Arrow Arrays are always nullable, you can supply an optional mask using
the <code class="docutils literal"><span class="pre">mask</span></code> parameter to mark all null-entries.</p>
</div>
<div class="section" id="type-differences">
<h2>Type differences<a class="headerlink" href="#type-differences" title="Permalink to this headline">¶</a></h2>
<p>With the current design of Pandas and Arrow, it is not possible to convert all
column types unmodified. One of the main issues here is that Pandas has no
support for nullable columns of arbitrary type. Also <code class="docutils literal"><span class="pre">datetime64</span></code> is currently
fixed to nanosecond resolution. On the other side, Arrow might be still missing
support for some types.</p>
<div class="section" id="pandas-arrow-conversion">
<h3>Pandas -&gt; Arrow Conversion<a class="headerlink" href="#pandas-arrow-conversion" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="48%" />
<col width="52%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Source Type (Pandas)</th>
<th class="head">Destination Type (Arrow)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">bool</span></code></td>
<td><code class="docutils literal"><span class="pre">BOOL</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">(u)int{8,16,32,64}</span></code></td>
<td><code class="docutils literal"><span class="pre">(U)INT{8,16,32,64}</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">float32</span></code></td>
<td><code class="docutils literal"><span class="pre">FLOAT</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">float64</span></code></td>
<td><code class="docutils literal"><span class="pre">DOUBLE</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">str</span></code> / <code class="docutils literal"><span class="pre">unicode</span></code></td>
<td><code class="docutils literal"><span class="pre">STRING</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">pd.Categorical</span></code></td>
<td><code class="docutils literal"><span class="pre">DICTIONARY</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">pd.Timestamp</span></code></td>
<td><code class="docutils literal"><span class="pre">TIMESTAMP(unit=ns)</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">datetime.date</span></code></td>
<td><code class="docutils literal"><span class="pre">DATE</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="arrow-pandas-conversion">
<h3>Arrow -&gt; Pandas Conversion<a class="headerlink" href="#arrow-pandas-conversion" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Source Type (Arrow)</th>
<th class="head">Destination Type (Pandas)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">BOOL</span></code></td>
<td><code class="docutils literal"><span class="pre">bool</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">BOOL</span></code> <em>with nulls</em></td>
<td><code class="docutils literal"><span class="pre">object</span></code> (with values <code class="docutils literal"><span class="pre">True</span></code>, <code class="docutils literal"><span class="pre">False</span></code>, <code class="docutils literal"><span class="pre">None</span></code>)</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">(U)INT{8,16,32,64}</span></code></td>
<td><code class="docutils literal"><span class="pre">(u)int{8,16,32,64}</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">(U)INT{8,16,32,64}</span></code> <em>with nulls</em></td>
<td><code class="docutils literal"><span class="pre">float64</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">FLOAT</span></code></td>
<td><code class="docutils literal"><span class="pre">float32</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">DOUBLE</span></code></td>
<td><code class="docutils literal"><span class="pre">float64</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">STRING</span></code></td>
<td><code class="docutils literal"><span class="pre">str</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">DICTIONARY</span></code></td>
<td><code class="docutils literal"><span class="pre">pd.Categorical</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">TIMESTAMP(unit=*)</span></code></td>
<td><code class="docutils literal"><span class="pre">pd.Timestamp</span></code> (<code class="docutils literal"><span class="pre">np.datetime64[ns]</span></code>)</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">DATE</span></code></td>
<td><code class="docutils literal"><span class="pre">pd.Timestamp</span></code> (<code class="docutils literal"><span class="pre">np.datetime64[ns]</span></code>)</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="filesystems.html" class="btn btn-neutral float-right" title="File interfaces and Memory Maps" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="install.html" class="btn btn-neutral" title="Install PyArrow" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016 Apache Software Foundation.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>